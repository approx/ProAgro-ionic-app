<!--
  Generated template for the InventoryItenRegisterPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-content padding>
  <h1>Registrar novo Iten</h1>
  <form (ngSubmit)="Register()" #RegisterForm="ngForm">
    <ion-grid padding class="formContent">
      <ion-row style="align-items: flex-end;">
        <ion-col col-12 col-md-4>
          <ion-item padding-top>
            <ion-label>Fazenda*</ion-label>
            <ion-select [(ngModel)]="iten.farm_id" (ionChange)="selectFarm($event)" required name="farm">
              <ion-option *ngFor="let farm of farms" value="{{farm.id}}">{{farm.name}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-8>
          <ion-item>
            <ion-label floating>Nome*</ion-label>
            <ion-input type="text" required maxlength="45" #name="ngModel" [(ngModel)]="iten.name" name="name" value=""></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6 col-lg-4>
          <ion-item>
            <ion-label floating>Valor total*</ion-label>
            <ion-input type="text" required [(modelMask)]="iten.price" (ionChange)="depreciationMounth()" [mask]="currency_id=='BRL' ? 'R$ 9':'$ 9'" [debug]="true" [form]="RegisterForm" currency="true" name="value"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6 col-lg-4>
          <ion-item>
            <ion-label floating>Tempo de depreciação(meses)</ion-label>
            <ion-input type="text" maxlength="45" #name="ngModel" (ionChange)="depreciationMounth()" [(ngModel)]="iten.depreciation_time" name="depreciation_time" value=""></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6 col-lg-4>
          <ion-item>
            <ion-label floating>Depreciação/mes</ion-label>
            <ion-input type="text" readonly="true" maxlength="45" #name="ngModel" [(ngModel)]="depreciation_value" name="depreciation_value" value=""></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row class="justifyCenter" margin-bottom>
        <button type="submit" [disabled]="!RegisterForm.form.valid" ion-button col-12 col-md-3>Cadastrar</button>
      </ion-row>
      <ion-col *ngIf="farm" col-12 col-md-12>
        <iframe
        width="100%"
        height="450"
        frameborder="0" style="border:0"
        [src]="mapUrl" allowfullscreen></iframe>
      </ion-col>
    </ion-grid>
  </form>
</ion-content>
